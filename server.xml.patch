--- image-server.xml	2020-09-10 11:49:53.000000000 -0700
+++ server.xml	2020-09-16 11:08:20.000000000 -0700
@@ -113,12 +113,18 @@
     -->
 
     <!-- Define an AJP 1.3 Connector on port 8009 -->
-    <!--
     <Connector protocol="AJP/1.3"
-               address="::1"
+               address="0.0.0.0"
                port="8009"
-               redirectPort="8443" />
-    -->
+               redirectPort="8443"
+               acceptCount="1000" 
+               acceptorThreadCount="2"
+               connectionTimeout="20000"
+               maxConnections="10000"
+               maxPostSize="-1"
+               maxThreads="500"
+               allowedRequestAttributesPattern=".*"
+               secretRequired="false"/>
 
     <!-- An Engine represents the entry point (within Catalina) that processes
          every request.  The Engine implementation for Tomcat stand alone
@@ -152,18 +158,22 @@
       <Host name="localhost"  appBase="webapps"
             unpackWARs="true" autoDeploy="true">
 
+
         <!-- SingleSignOn valve, share authentication between web applications
              Documentation at: /docs/config/valve.html -->
         <!--
         <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
         -->
+        <!-- Remote IP Valve -->
+        <Valve className="org.apache.catalina.valves.RemoteIpValve" requestAttributesEnabled="true" />
 
         <!-- Access log processes all example.
              Documentation at: /docs/config/valve.html
              Note: The pattern used is equivalent to using pattern="common" -->
         <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
+               requestAttributesEnabled="true"
                prefix="localhost_access_log" suffix=".txt"
-               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
+               pattern="%a %l %u %t &quot;%r&quot; %s %b" />
 
       </Host>
     </Engine>
