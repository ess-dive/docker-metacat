--- image-server.xml	2019-05-31 12:43:29.000000000 -0700
+++ server.xml	2019-05-31 16:11:30.000000000 -0700
@@ -90,7 +90,13 @@
     -->
 
     <!-- Define an AJP 1.3 Connector on port 8009 -->
-    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />
+    <Connector port="8009" protocol="AJP/1.3"
+               acceptCount="1000"
+               acceptorThreadCount="2"
+               connectionTimeout="20000"
+               maxConnections="10000"
+               maxPostSize="-1"
+               maxThreads="500" />
 
 
     <!-- An Engine represents the entry point (within Catalina) that processes
@@ -131,12 +137,16 @@
         <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
         -->
 
+        <!-- Remote IP Valve -->
+        <Valve className="org.apache.catalina.valves.RemoteIpValve" requestAttributesEnabled="true" />
+
         <!-- Access log processes all example.
              Documentation at: /docs/config/valve.html
              Note: The pattern used is equivalent to using pattern="common" -->
         <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
+               requestAttributesEnabled="true"
                prefix="localhost_access_log." suffix=".txt"
-               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
+               pattern="%a %l %u %t &quot;%r&quot; %s %b" />
 
       </Host>
     </Engine>
